{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],{cUBK:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return I})),n.d(e,\"b\",(function(){return N}));var i=n(\"jT3O\"),r=n(\"nKUr\"),d=n(\"VX74\"),a=n(\"lTCR\"),o=n.n(a),c=n(\"vOnD\"),s=n(\"obyI\"),u=n(\"YFqc\"),l=n.n(u),p=c.b.div.withConfig({displayName:\"ItemStyles\",componentId:\"sc-16pk14u-0\"})([\"background:white;border:1px solid var(--offWhite);box-shadow:var(--bs);position:relative;display:flex;flex-direction:column;img{width:100%;height:400px;object-fit:cover;}p{line-height:2;font-weight:300;flex-grow:1;padding:0 3rem;font-size:1.5rem;}.buttonList{display:grid;width:100%;border-top:1px solid var(--lightGray);grid-template-columns:repeat(auto-fit,minmax(100px,1fr));grid-gap:1px;background:var(--lightGray);& > *{background:white;border:0;font-size:1rem;padding:1rem;}}\"]),b=c.b.h3.withConfig({displayName:\"Title\",componentId:\"sc-16nq74k-0\"})([\"margin:0 1rem;text-align:center;transform:skew(-5deg) rotate(-1deg);margin-top:-3rem;text-shadow:2px 2px 0 rgba(0,0,0,0.1);a{background:var(--red);display:inline;line-height:1.3;font-size:4rem;text-align:center;color:white;padding:0 1rem;}\"]),f=c.b.span.withConfig({displayName:\"PriceTag\",componentId:\"nwbk6t-0\"})([\"background:var(--red);transform:rotate(3deg);color:white;font-weight:600;padding:5px;line-height:1;font-size:3rem;display:inline-block;position:absolute;top:-3px;right:-3px;\"]),g=n(\"2y/O\"),h=n(\"xvhg\");function j(){var t=Object(i.a)([\"\\n   mutation DELETE_PRODUCT_MUTATION($id: ID!) {\\n      deleteProduct(id: $id) {\\n         id\\n         name\\n      }\\n   }\\n\"]);return j=function(){return t},t}var m=o()(j());function x(t,e){t.evict(t.identify(e.data.deleteProduct))}function O(t){var e=t.id,n=t.children,i=Object(d.useMutation)(m,{variables:{id:e},update:x}),a=Object(h.a)(i,2),o=a[0],c=a[1].loading;return Object(r.jsx)(\"button\",{type:\"button\",disabled:c,onClick:function(){confirm(\"Are you sure you want to delete this item?\")&&o().catch((function(t){return alert(t.message)}))},children:n})}var v=n(\"VliS\");function y(){var t=Object(i.a)([\"\\n   mutation ADD_TO_CART_MUTATION($id: ID!) {\\n      addToCart(productId: $id) {\\n         id\\n      }\\n   }\\n\"]);return y=function(){return t},t}var w=o()(y());function _(t){var e=t.id,n=Object(d.useMutation)(w,{variables:{id:e},refetchQueries:[{query:v.a}]}),i=Object(h.a)(n,2),a=i[0],o=i[1].loading;return Object(r.jsxs)(\"button\",{disabled:o,type:\"button\",onClick:a,children:[\"Add\",o&&\"ing\",\" to cart!\"]})}function k(t){var e,n,i=t.product;return Object(r.jsxs)(p,{children:[Object(r.jsx)(\"img\",{src:null===i||void 0===i||null===(e=i.photo)||void 0===e||null===(n=e.image)||void 0===n?void 0:n.publicUrlTransformed,alt:i.name}),Object(r.jsx)(b,{children:Object(r.jsx)(l.a,{href:\"/product/\".concat(i.id),children:i.name})}),Object(r.jsx)(f,{children:Object(g.a)(i.price)}),Object(r.jsx)(\"p\",{children:i.description}),Object(r.jsxs)(\"div\",{className:\"buttonList\",children:[Object(r.jsx)(l.a,{href:{pathname:\"update\",query:{id:i.id}},children:\"Edit\"}),Object(r.jsx)(_,{id:i.id}),Object(r.jsx)(O,{id:i.id,children:\"Delete\"})]})]})}function T(){var t=Object(i.a)([\"\\n   query ALL_PRODUCTS_QUERY($skip: Int = 0, $first: Int) {\\n      allProducts(first: $first, skip: $skip) {\\n         id\\n         name\\n         description\\n         price\\n         photo {\\n            id\\n            image {\\n               publicUrlTransformed\\n            }\\n         }\\n      }\\n   }\\n\"]);return T=function(){return t},t}var I=o()(T()),C=c.b.div.withConfig({displayName:\"Products__ProductsListStyles\",componentId:\"sc-1uv5x8m-0\"})([\"display:grid;grid-template-columns:1fr 1fr;grid-gap:60px;\"]);function N(t){var e=t.page,n=Object(d.useQuery)(I,{variables:{skip:e*s.a-s.a,first:s.a}}),i=n.data,a=n.error;return n.loading?Object(r.jsx)(\"p\",{children:\"Loading...\"}):a?Object(r.jsxs)(\"p\",{children:[\"Error: \",a.message]}):Object(r.jsx)(\"div\",{children:Object(r.jsx)(C,{children:i.allProducts.map((function(t){return Object(r.jsx)(k,{product:t},t.id)}))})})}},dapr:function(t,e,n){\"use strict\";n.r(e);var i=n(\"my7y\");n.d(e,\"default\",(function(){return i.default}))},my7y:function(t,e,n){\"use strict\";n.r(e),n.d(e,\"default\",(function(){return o}));var i=n(\"nKUr\"),r=n(\"nOHt\"),d=n(\"KzMt\"),a=n(\"cUBK\");function o(){var t=Object(r.useRouter)().query,e=parseInt(t.page);return Object(i.jsxs)(\"div\",{children:[Object(i.jsx)(d.b,{page:e||1}),Object(i.jsx)(a.b,{page:e||1}),Object(i.jsx)(d.b,{page:e||1})]})}},tDMC:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/products/[page]\",function(){return n(\"dapr\")}])}},[[\"tDMC\",0,1,2,4,3,5]]]);","extractedComments":[]}